# üåç OpenStreetMap Module ‚Äî –ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞–Ω–∏—Ü —Ä–µ–≥–∏–æ–Ω–æ–≤

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å **OpenStreetMap** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –†–æ—Å—Å–∏–∏ –∏–∑ OpenStreetMap —á–µ—Ä–µ–∑ Overpass API. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª–∏–≥–æ–Ω—ã —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã—Ö –æ–∫—Ä—É–≥–æ–≤, —Å—É–±—ä–µ–∫—Ç–æ–≤ –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å —Ä–µ—à–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:

- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü** –†–æ—Å—Å–∏–∏ –∏–∑ OSM
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è
- ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ GeoJSON** –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- ‚úÖ **–†–∞—Å—á–µ—Ç –ø–ª–æ—â–∞–¥–∏** —Ä–µ–≥–∏–æ–Ω–æ–≤ –≤ –∫–º¬≤
- ‚úÖ **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–æ–∏–¥–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
- ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** (–Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞—Å–µ–ª–µ–Ω–∏–µ, Wikidata)
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
openstreetmap/
‚îú‚îÄ‚îÄ openstreetmap.py    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ combined_code.txt   # –ê—Ä—Ö–∏–≤ –∫–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. fetch_osm_data()

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Overpass API:

```python
def fetch_osm_data(admin_level: str) -> Optional[Dict]:
    """
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏–∑ OSM
    
    Args:
        admin_level: —É—Ä–æ–≤–µ–Ω—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è (4, 6, 8)
        
    Returns:
        JSON –æ—Ç–≤–µ—Ç –æ—Ç Overpass API –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
```

**Overpass –∑–∞–ø—Ä–æ—Å:**
```overpass
[out:json][timeout:600];
rel["ISO3166-1"="RU"]["admin_level"="2"];
map_to_area;
rel(area)["boundary"="administrative"]["admin_level"="{level}"];
out geom;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `timeout:600` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (10 –º–∏–Ω—É—Ç)
- `ISO3166-1=RU` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –†–æ—Å—Å–∏–∏
- `admin_level` ‚Äî —É—Ä–æ–≤–µ–Ω—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è

#### 2. process_and_save_to_db()

–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î:

```python
def process_and_save_to_db(geojson_data: Dict, admin_level: str):
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç GeoJSON –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    
    Args:
        geojson_data: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ GeoJSON
        admin_level: —É—Ä–æ–≤–µ–Ω—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è
    """
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç:**
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏ (Polygon/MultiPolygon)
2. –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ (tolerance=0.001)
3. –†–∞—Å—á–µ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥–∞
4. –†–∞—Å—á–µ—Ç –ø–ª–æ—â–∞–¥–∏ –≤ –∫–º¬≤
5. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

#### 3. extract_geopolygon_coords()

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è DataLens:

```python
def extract_geopolygon_coords(geom: dict) -> Optional[list]:
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç GeoJSON-–≥–µ–æ–º–µ—Ç—Ä–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç GEOPOLYGON –¥–ª—è DataLens
    
    Args:
        geom: GeoJSON –≥–µ–æ–º–µ—Ç—Ä–∏—è (Polygon –∏–ª–∏ MultiPolygon)
        
    Returns:
        –°–ø–∏—Å–æ–∫ –∫–æ–ª–µ—Ü [[lat, lon], ...] –∏–ª–∏ None –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
```

**–§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–∞:**
```json
[
    [[55.75, 37.61], [55.76, 37.62], ...],  // –í–Ω–µ—à–Ω–µ–µ –∫–æ–ª—å—Ü–æ
    [[55.74, 37.60], [55.73, 37.59], ...]   // –î—ã—Ä–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
]
```

#### 4. calculate_area_km2()

–†–∞—Å—á–µ—Ç –ø–ª–æ—â–∞–¥–∏ —Ä–µ–≥–∏–æ–Ω–∞:

```python
def calculate_area_km2(geom) -> float:
    """
    –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–ª–æ—â–∞–¥—å –ø–æ–ª–∏–≥–æ–Ω–∞ –≤ –∫–º¬≤
    
    Args:
        geom: GeoJSON –≥–µ–æ–º–µ—Ç—Ä–∏—è
        
    Returns:
        –ü–ª–æ—â–∞–¥—å –≤ –∫–º¬≤
    """
```

**–§–æ—Ä–º—É–ª–∞:**
```
area_km¬≤ = area_degrees¬≤ √ó (111.0 –∫–º/–≥—Ä–∞–¥—É—Å)¬≤
```

#### 5. get_admin_type()

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã:

```python
def get_admin_type(admin_level: str) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ —É—Ä–æ–≤–Ω—é admin_level
    
    –ú–∞–ø–ø–∏–Ω–≥:
        2 - –°—Ç—Ä–∞–Ω–∞
        4 - –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥
        6 - –°—É–±—ä–µ–∫—Ç –§–µ–¥–µ—Ä–∞—Ü–∏–∏
        8 - –ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω
        ...
    """
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `admin_boundaries`

–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü:

```sql
CREATE TABLE admin_boundaries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    
    -- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    osm_id BIGINT NOT NULL,
    name VARCHAR(250) NOT NULL,
    name_en VARCHAR(250),
    
    -- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ
    admin_level VARCHAR(10) NOT NULL,
    admin_type VARCHAR(100),
    boundary_type VARCHAR(50) DEFAULT 'administrative',
    place_type VARCHAR(50),
    
    -- –î–µ–º–æ–≥—Ä–∞—Ñ–∏—è
    population INT DEFAULT 0,
    
    -- –í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏
    wikidata_id VARCHAR(20),
    wikipedia_url VARCHAR(255),
    
    -- –ì–µ–æ–º–µ—Ç—Ä–∏—è
    polygon_coordinates LONGTEXT,  -- –ü–æ–ª–Ω—ã–π GeoJSON
    polygon JSON,                   -- –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–ª–∏–≥–æ–Ω –¥–ª—è DataLens
    
    -- –¶–µ–Ω—Ç—Ä–æ–∏–¥ –∏ –ø–ª–æ—â–∞–¥—å
    centroid_lat DECIMAL(10,7),
    centroid_lon DECIMAL(10,7),
    area_sq_km DECIMAL(12,2),
    
    -- –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- –ò–Ω–¥–µ–∫—Å—ã
    INDEX idx_osm_id (osm_id),
    INDEX idx_admin_level (admin_level),
    INDEX idx_name (name),
    INDEX idx_centroid (centroid_lat, centroid_lon)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 
COMMENT='–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –†–æ—Å—Å–∏–∏ –∏–∑ OpenStreetMap';
```

### –ü–æ–ª—è —Ç–∞–±–ª–∏—Ü—ã

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `osm_id` | BIGINT | ID –æ–±—ä–µ–∫—Ç–∞ –≤ OpenStreetMap |
| `name` | VARCHAR(250) | –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º |
| `name_en` | VARCHAR(250) | –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º |
| `admin_level` | VARCHAR(10) | –£—Ä–æ–≤–µ–Ω—å (4, 6, 8) |
| `admin_type` | VARCHAR(100) | –¢–∏–ø (–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥, –°—É–±—ä–µ–∫—Ç –†–§ –∏ —Ç.–¥.) |
| `population` | INT | –ù–∞—Å–µ–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ) |
| `wikidata_id` | VARCHAR(20) | ID –≤ Wikidata (Q...) |
| `wikipedia_url` | VARCHAR(255) | –°—Å—ã–ª–∫–∞ –Ω–∞ Wikipedia |
| `polygon_coordinates` | LONGTEXT | –ü–æ–ª–Ω—ã–π GeoJSON –ø–æ–ª–∏–≥–æ–Ω |
| `polygon` | JSON | –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–ª–∏–≥–æ–Ω –¥–ª—è DataLens |
| `centroid_lat` | DECIMAL | –®–∏—Ä–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ |
| `centroid_lon` | DECIMAL | –î–æ–ª–≥–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ |
| `area_sq_km` | DECIMAL | –ü–ª–æ—â–∞–¥—å –≤ –∫–º¬≤ |

---

## üåê –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–≤–Ω–∏

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ ADMIN_LEVELS

```python
ADMIN_LEVELS = {
    "federal_districts": "4",  # –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞
    "regions": "6",            # –°—É–±—ä–µ–∫—Ç—ã –§–µ–¥–µ—Ä–∞—Ü–∏–∏
    "municipalities": "8"      # –ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã
}
```

### –ü–æ–ª–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π OSM

| –£—Ä–æ–≤–µ–Ω—å | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| 2 | –°—Ç—Ä–∞–Ω–∞ | –†–æ—Å—Å–∏–π—Å–∫–∞—è –§–µ–¥–µ—Ä–∞—Ü–∏—è |
| 3 | –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å–æ—é–∑ | - |
| **4** | **–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥** | –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –§–û |
| 5 | –†–µ–≥–∏–æ–Ω (–≥—Ä—É–ø–ø–∞ —Å—É–±—ä–µ–∫—Ç–æ–≤) | - |
| **6** | **–°—É–±—ä–µ–∫—Ç –§–µ–¥–µ—Ä–∞—Ü–∏–∏** | –ú–æ—Å–∫–≤–∞, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å |
| 7 | –ì–æ—Ä–æ–¥—Å–∫–æ–π –æ–∫—Ä—É–≥ | –≥. –ö–æ—Ä–æ–ª—ë–≤ |
| **8** | **–ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω** | –û–¥–∏–Ω—Ü–æ–≤—Å–∫–∏–π —Ä–∞–π–æ–Ω |
| 9 | –ì–æ—Ä–æ–¥—Å–∫–æ–µ –ø–æ—Å–µ–ª–µ–Ω–∏–µ | - |
| 10 | –°–µ–ª—å—Å–∫–æ–µ –ø–æ—Å–µ–ª–µ–Ω–∏–µ | - |

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–¥–µ

```python
# URL Overpass API
OVERPASS_URL = "https://overpass-api.de/api/interpreter"

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
TIMEOUT = 600

# –î–æ–ø—É—Å–∫ —É–ø—Ä–æ—â–µ–Ω–∏—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤
SIMPLIFY_TOLERANCE = 0.001

# –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
REQUEST_DELAY = 3
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î

```python
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ settings.py
from settings import DB_CONFIG

DB_CONFIG = {
    'user': 'username',
    'password': 'password',
    'host': 'localhost',
    'port': '3306',
    'database': 'aerometr',
    'charset': 'utf8mb4'
}
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
cd openstreetmap
python openstreetmap.py
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞ (admin_level=4)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—É–±—ä–µ–∫—Ç—ã –§–µ–¥–µ—Ä–∞—Ü–∏–∏ (admin_level=6)
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã (admin_level=8)
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –≤ —Ç–∞–±–ª–∏—Ü—É `admin_boundaries`

**–í—ã–≤–æ–¥:**
```
üåç –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –†–æ—Å—Å–∏–∏ –≤ admin_boundaries
======================================================================

üì• –£—Ä–æ–≤–µ–Ω—å: federal_districts (admin_level=4)
2025-10-19 12:00:00 - INFO - üì° –ó–∞–ø—Ä–æ—Å —É—Ä–æ–≤–Ω—è 4 –∫ Overpass API...
2025-10-19 12:00:15 - INFO - ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 8 –æ–±—ä–µ–∫—Ç–æ–≤ —É—Ä–æ–≤–Ω—è 4

üì• –£—Ä–æ–≤–µ–Ω—å: regions (admin_level=6)
2025-10-19 12:00:18 - INFO - üì° –ó–∞–ø—Ä–æ—Å —É—Ä–æ–≤–Ω—è 6 –∫ Overpass API...
2025-10-19 12:01:45 - INFO - ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 85 –æ–±—ä–µ–∫—Ç–æ–≤ —É—Ä–æ–≤–Ω—è 6

üì• –£—Ä–æ–≤–µ–Ω—å: municipalities (admin_level=8)
2025-10-19 12:01:48 - INFO - üì° –ó–∞–ø—Ä–æ—Å —É—Ä–æ–≤–Ω—è 8 –∫ Overpass API...
2025-10-19 12:05:30 - INFO - ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 1847 –æ–±—ä–µ–∫—Ç–æ–≤ —É—Ä–æ–≤–Ω—è 8

‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ admin_boundaries.
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è

```python
from openstreetmap.openstreetmap import fetch_osm_data, process_and_save_to_db
import osm2geojson

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ —Å—É–±—ä–µ–∫—Ç–æ–≤ –§–µ–¥–µ—Ä–∞—Ü–∏–∏
raw_data = fetch_osm_data("6")

if raw_data:
    geojson_data = osm2geojson.json2geojson(raw_data)
    process_and_save_to_db(geojson_data, "6")
    print("‚úÖ –°—É–±—ä–µ–∫—Ç—ã –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü

```python
import mysql.connector
from settings import DB_CONFIG

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
conn = mysql.connector.connect(**DB_CONFIG)
cursor = conn.cursor()

# –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
cursor.execute("DELETE FROM admin_boundaries WHERE admin_level = %s", ("6",))
conn.commit()

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
from openstreetmap.openstreetmap import main
main()
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å

```python
# main.py
from openstreetmap.openstreetmap import main as load_boundaries

def initialize_regions():
    """–ü–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞–Ω–∏—Ü"""
    print("–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –∏–∑ OSM...")
    load_boundaries()
    print("‚úÖ –ì—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã")

if __name__ == "__main__":
    # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
    initialize_regions()
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ admin_boundaries

```json
{
    "osm_id": 147166,
    "name": "–ú–æ—Å–∫–≤–∞",
    "name_en": "Moscow",
    "admin_level": "6",
    "admin_type": "–°—É–±—ä–µ–∫—Ç –§–µ–¥–µ—Ä–∞—Ü–∏–∏",
    "boundary_type": "administrative",
    "population": 12655050,
    "wikidata_id": "Q649",
    "wikipedia_url": "ru:–ú–æ—Å–∫–≤–∞",
    "centroid_lat": 55.755773,
    "centroid_lon": 37.617761,
    "area_sq_km": 2561.50,
    "polygon": [
        [[55.574, 37.200], [55.575, 37.201], ...],
        [[55.573, 37.199], ...]
    ]
}
```

---

## üîç –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏

#### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤

```sql
SELECT osm_id, name, admin_type, population, area_sq_km
FROM admin_boundaries
WHERE admin_level = '6'
ORDER BY name;
```

#### –¢–æ–ø-10 —Ä–µ–≥–∏–æ–Ω–æ–≤ –ø–æ –ø–ª–æ—â–∞–¥–∏

```sql
SELECT name, area_sq_km, population
FROM admin_boundaries
WHERE admin_level = '6'
ORDER BY area_sq_km DESC
LIMIT 10;
```

#### –¢–æ–ø-10 –ø–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—é

```sql
SELECT name, population, area_sq_km,
       ROUND(population / area_sq_km, 2) as density
FROM admin_boundaries
WHERE admin_level = '6'
  AND population > 0
ORDER BY population DESC
LIMIT 10;
```

#### –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞

```sql
SELECT name, name_en, area_sq_km
FROM admin_boundaries
WHERE admin_level = '4'
ORDER BY name;
```

#### –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

```sql
SELECT name, admin_type, centroid_lat, centroid_lon
FROM admin_boundaries
WHERE name LIKE '%–ú–æ—Å–∫–æ–≤—Å–∫%'
ORDER BY admin_level, name;
```

---

## üó∫Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –° Parser Module

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –≥–µ–æ–ø—Ä–∏–≤—è–∑–∫–∏ –ø–æ–ª–µ—Ç–æ–≤:

```python
from parser.parser_file import FlightDataProcessor

# –ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –∏–∑ –ë–î
processor = FlightDataProcessor()
processor.load_regions()  # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª–∏–≥–æ–Ω—ã –∏–∑ admin_boundaries
```

### –° Aircraft Module

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –¥–ª—è —Å–∞–º–æ–ª–µ—Ç–∞:

```python
from aircraft.aircraft import load_regions

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ —Ä–µ–≥–∏–æ–Ω–æ–≤
load_regions()

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
region = determine_region(55.7558, 37.6173)
print(f"–†–µ–≥–∏–æ–Ω: {region}")  # –ú–æ—Å–∫–≤–∞
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ `regions`:

```sql
-- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ admin_boundaries –≤ regions
INSERT INTO regions (name, polygon, center_lat, center_lon, area_sq_km)
SELECT 
    name,
    polygon_coordinates,
    centroid_lat,
    centroid_lon,
    area_sq_km
FROM admin_boundaries
WHERE admin_level = '6';
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ

**–°–∏–º–ø—Ç–æ–º:** `RequestException: Timeout`

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ –∑–∞–ø—Ä–æ—Å–µ: `[timeout:900]`
2. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —É—Ä–æ–≤–Ω–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä Overpass API

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã:**
```python
OVERPASS_URLS = [
    "https://overpass-api.de/api/interpreter",
    "https://overpass.kumi.systems/api/interpreter",
    "https://overpass.openstreetmap.ru/api/interpreter"
]
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞

**–°–∏–º–ø—Ç–æ–º:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥–∏–æ–Ω—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ OSM: https://www.openstreetmap.org/
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ admin_level –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–≥–∏ `boundary=administrative`

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è

**–°–∏–º–ø—Ç–æ–º:** `GeometryError: Invalid geometry`

**–†–µ—à–µ–Ω–∏–µ:**
```python
from shapely.geometry import shape
from shapely.validation import make_valid

shp = shape(geom)
if not shp.is_valid:
    shp = make_valid(shp)  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –ø–æ–ª–∏–≥–æ–Ω—ã

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ –ë–î (LONGTEXT overflow)

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ —É–ø—Ä–æ—â–µ–Ω–∏–µ: `simplify(0.01)`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MEDIUMTEXT –∏–ª–∏ LONGTEXT –¥–ª—è polygon_coordinates
3. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –û–±—ä–µ–∫—Ç–æ–≤ |
|----------|-------|----------|
| **–ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–≤–Ω—è 4** | ~15 —Å–µ–∫ | 8 |
| **–ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–≤–Ω—è 6** | ~90 —Å–µ–∫ | 85 |
| **–ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–≤–Ω—è 8** | ~240 —Å–µ–∫ | 1,847 |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** | ~5 —Å–µ–∫ | –Ω–∞ 100 –æ–±—ä–µ–∫—Ç–æ–≤ |
| **–ü–æ–ª–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** | ~6 –º–∏–Ω—É—Ç | 1,940 –æ–±—ä–µ–∫—Ç–æ–≤ |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ batch size –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –≤—Å—Ç–∞–≤–æ–∫
cursor.executemany(insert_query, batch_data)

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
cursor.execute("ALTER TABLE admin_boundaries DISABLE KEYS")
# ... –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö ...
cursor.execute("ALTER TABLE admin_boundaries ENABLE KEYS")
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **SQL Injection –∑–∞—â–∏—Ç–∞**: Prepared statements
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ is_valid
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Try-except –±–ª–æ–∫–∏
- **Timeout**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: UTF-8 –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `../log/russia_boundaries_loader.log`:

```
2025-10-19 12:00:00 - INFO - üì° –ó–∞–ø—Ä–æ—Å —É—Ä–æ–≤–Ω—è 6 –∫ Overpass API...
2025-10-19 12:01:30 - INFO - ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 85 –æ–±—ä–µ–∫—Ç–æ–≤ —É—Ä–æ–≤–Ω—è 6
2025-10-19 12:01:31 - WARNING - ‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –æ–±—ä–µ–∫—Ç–∞ 147166: Duplicate entry
```

---

## üåê –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

### Overpass API

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://wiki.openstreetmap.org/wiki/Overpass_API
- **Overpass Turbo**: https://overpass-turbo.eu/ (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤)
- **–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º**: https://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL

### OpenStreetMap

- **–ì–ª–∞–≤–Ω–∞—è**: https://www.openstreetmap.org/
- **Wiki**: https://wiki.openstreetmap.org/
- **Taginfo**: https://taginfo.openstreetmap.org/ (—Å–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–µ–≥–∞–º)

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **osm2geojson**: https://github.com/aspectumapp/osm2geojson
- **Shapely**: https://shapely.readthedocs.io/

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ Overpass

```python
import requests

query = """
[out:json][timeout:25];
rel["ISO3166-1"="RU"]["admin_level"="2"];
map_to_area;
rel(area)["boundary"="administrative"]["admin_level"="6"]["name"="–ú–æ—Å–∫–≤–∞"];
out geom;
"""

response = requests.post(
    "https://overpass-api.de/api/interpreter",
    data=query.encode('utf-8'),
    headers={'Content-Type': 'text/plain; charset=utf-8'},
    timeout=30
)

print(response.status_code)
print(len(response.json()['elements']))
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º
SELECT admin_level, admin_type, COUNT(*) as count
FROM admin_boundaries
GROUP BY admin_level, admin_type
ORDER BY admin_level;

-- –†–µ–≥–∏–æ–Ω—ã –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ü–µ–Ω—Ç—Ä–∞
SELECT name, admin_level
FROM admin_boundaries
WHERE centroid_lat IS NULL OR centroid_lon IS NULL;

-- –†–µ–≥–∏–æ–Ω—ã —Å –Ω—É–ª–µ–≤–æ–π –ø–ª–æ—â–∞–¥—å—é
SELECT name, admin_level, area_sq_km
FROM admin_boundaries
WHERE area_sq_km = 0 OR area_sq_km IS NULL;
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–î–∞–Ω–Ω—ã–µ OpenStreetMap –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **ODbL** (Open Database License).

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- ¬© OpenStreetMap contributors
- –£–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- Share-Alike –ø—Ä–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** https://www.openstreetmap.org/copyright

–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ: –ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ ¬© 2025 –ö–æ–º–∞–Ω–¥–∞ Finance.

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã:
- **–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞ (—É—Ä–æ–≤–µ–Ω—å 4)**: —Ä–∞–∑ –≤ –≥–æ–¥
- **–°—É–±—ä–µ–∫—Ç—ã –§–µ–¥–µ—Ä–∞—Ü–∏–∏ (—É—Ä–æ–≤–µ–Ω—å 6)**: —Ä–∞–∑ –≤ 3-6 –º–µ—Å—è—Ü–µ–≤
- **–ú—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç—ã (—É—Ä–æ–≤–µ–Ω—å 8)**: —Ä–∞–∑ –≤ –º–µ—Å—è—Ü

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```python
# cron job –∏–ª–∏ scheduled task
from openstreetmap.openstreetmap import main
import schedule
import time

def update_boundaries():
    print("–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü...")
    main()
    print("‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ")

# –ó–∞–ø—É—Å–∫ —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
schedule.every().month.do(update_boundaries)

while True:
    schedule.run_pending()
    time.sleep(86400)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏
```

---

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0.0  
**–ú–æ–¥—É–ª—å:** OpenStreetMap


# üó∫Ô∏è Grid Generator ‚Äî –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Ç–æ–∫

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å **Grid Generator** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–µ—Ç–∫–∞–º–∏ –¥–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∏ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ (H3) —Å–µ—Ç–∫–∏, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–µ—Ç–æ–≤ –ø–æ —è—á–µ–π–∫–∞–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≥–µ–æ–ø—Ä–∏–≤—è–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∫ —è—á–µ–π–∫–∞–º —Å–µ—Ç–∫–∏.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å —Ä–µ—à–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:

- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–µ—Ç–æ–∫** –∑–∞–¥–∞–Ω–Ω–æ–π –ø–ª–æ—â–∞–¥–∏
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–æ–∫ H3** (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 6)
- ‚úÖ **–†–∞—Å—á–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–æ–≤** –ø–æ —è—á–µ–π–∫–∞–º
- ‚úÖ **–ì–µ–æ–ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–µ—Ç–æ–≤** –∫ —è—á–µ–π–∫–∞–º —Å–µ—Ç–∫–∏
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏** –†–æ—Å—Å–∏–∏
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø–ª–æ—â–∞–¥—å** —è—á–µ–µ–∫ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É settings

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
grid/
‚îú‚îÄ‚îÄ grid_generator.py    # –û—Å–Ω–æ–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–µ—Ç–æ–∫
‚îú‚îÄ‚îÄ __init__.py         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è

### GridGenerator ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å

```python
class GridGenerator:
    def __init__(self, db_config):
        self.db_config = db_config
        self.connection = None
        self.default_area = 1000  # –∫–º¬≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        self.regions = []  # –ö—ç—à —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

##### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ç–æ–∫

```python
def generate_grids(self, bbox: tuple) -> bool:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∏ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∫–∏ –¥–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
    
    Args:
        bbox: (lat_min, lon_min, lat_max, lon_max)
        
    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, False –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
```

**–ü—Ä–∏–º–µ—Ä:**
```python
from grid.grid_generator import GridGenerator
from settings import DB_CONFIG

generator = GridGenerator(DB_CONFIG)
generator.connect()

# Bbox –†–æ—Å—Å–∏–∏
russia_bbox = (41.0, 19.0, 82.0, 180.0)
if generator.generate_grids(russia_bbox):
    print("‚úÖ –°–µ—Ç–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã")
```

##### 2. –ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞

```python
def generate_square_grid(self, bbox: tuple, area_km2: float) -> bool:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—É—é —Å–µ—Ç–∫—É –∑–∞–¥–∞–Ω–Ω–æ–π –ø–ª–æ—â–∞–¥–∏
    
    Args:
        bbox: –≥—Ä–∞–Ω–∏—Ü—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
        area_km2: –ø–ª–æ—â–∞–¥—å —è—á–µ–π–∫–∏ –≤ –∫–º¬≤
        
    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
    """
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä —Å—Ç–æ—Ä–æ–Ω—ã –∫–≤–∞–¥—Ä–∞—Ç–∞: `side = sqrt(area_km2)`
2. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —à–∞–≥ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö: `lat_step = side / 111.0`
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç–∫–∞ —Å —É—á–µ—Ç–æ–º bbox
4. –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏
5. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ —è—á–µ–π–∫–µ

##### 3. –ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ (H3)

```python
def generate_hexagon_grid(self, bbox: tuple, resolution: int = 6) -> bool:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—É—é —Å–µ—Ç–∫—É H3
    
    Args:
        bbox: –≥—Ä–∞–Ω–∏—Ü—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
        resolution: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ H3 (0-15), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6
        
    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
    """
```

**–†–∞–∑—Ä–µ—à–µ–Ω–∏—è H3:**

| –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ | –ü–ª–æ—â–∞–¥—å (–∫–º¬≤) | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|------------|---------------|---------------|------------|
| 0 | ~1,200 –∫–º | ~4,250,000 | –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã |
| 3 | ~60 –∫–º | ~1,000 | –°—Ç—Ä–∞–Ω—ã |
| **6** | **~3.2 –∫–º** | **~36** | **–†–µ–≥–∏–æ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)** |
| 9 | ~174 –º | ~0.10 | –ì–æ—Ä–æ–¥–∞ |
| 12 | ~9.4 –º | ~0.0001 | –£–ª–∏—Ü—ã |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ H3:**
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –û–¥–∏–Ω–∞–∫–æ–≤–∞—è –ø–ª–æ—â–∞–¥—å —è—á–µ–µ–∫
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Å–æ—Å–µ–¥–µ–π
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

##### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–æ–≤

```python
def update_grid_cell_flights(self, batch_size: int = 1000) -> bool:
    """
    –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —è—á–µ–π–∫–∞—Ö
    
    Args:
        batch_size: —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    """

def update_hexagon_flights(self) -> bool:
    """
    –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—ã—Ö —è—á–µ–π–∫–∞—Ö H3
    """
```

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª–µ—Ç—ã –∏–∑ `processed_flights`
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —è—á–µ–π–∫–∞ —Å–µ—Ç–∫–∏
3. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–µ
4. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ–ª—è `total_flights` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö —Å–µ—Ç–æ–∫

##### 5. –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–µ—Ç–æ–≤ –∫ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–º

```python
def update_processed_flights_hexagon_id_simple(self) -> int:
    """
    –û–±–Ω–æ–≤–ª—è–µ—Ç hexagon_id –≤ —Ç–∞–±–ª–∏—Ü–µ processed_flights
    
    Returns:
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
    """
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª–µ—Ç—ã –±–µ–∑ hexagon_id
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª–µ—Ç–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è H3 –∏–Ω–¥–µ–∫—Å
3. –ù–∞—Ö–æ–¥–∏—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å –≤ `grid_hexagon`
4. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ `hexagon_id`

##### 6. –£—Ç–∏–ª–∏—Ç—ã

```python
def get_setting_value(self, key: str, default: str) -> str:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã settings"""

def check_table_exists(self, table_name: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã"""

def drop_grid_tables() -> bool:
    """–£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Å–µ—Ç–æ–∫"""

def create_settings_table() -> bool:
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫"""
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `grid_square`

–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞:

```sql
CREATE TABLE grid_square (
    id INT AUTO_INCREMENT PRIMARY KEY,
    min_lat DECIMAL(10,7) NOT NULL,
    max_lat DECIMAL(10,7) NOT NULL,
    min_lon DECIMAL(10,7) NOT NULL,
    max_lon DECIMAL(10,7) NOT NULL,
    center_lat DECIMAL(10,7) NOT NULL,
    center_lon DECIMAL(10,7) NOT NULL,
    total_flights INT DEFAULT 0,
    region_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_center (center_lat, center_lon),
    INDEX idx_region (region_id),
    INDEX idx_flights (total_flights)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 
COMMENT='–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–æ–≤';
```

**–ü–æ–ª—è:**
- `min_lat`, `max_lat`, `min_lon`, `max_lon` ‚Äî –≥—Ä–∞–Ω–∏—Ü—ã –∫–≤–∞–¥—Ä–∞—Ç–∞
- `center_lat`, `center_lon` ‚Äî —Ü–µ–Ω—Ç—Ä –∫–≤–∞–¥—Ä–∞—Ç–∞
- `total_flights` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ —è—á–µ–π–∫–µ
- `region_id` ‚Äî ID —Ä–µ–≥–∏–æ–Ω–∞

### –¢–∞–±–ª–∏—Ü–∞ `grid_hexagon`

–ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ H3:

```sql
CREATE TABLE grid_hexagon (
    id INT AUTO_INCREMENT PRIMARY KEY,
    hexagon_index VARCHAR(20) UNIQUE NOT NULL,
    center_lat DECIMAL(10,7) NOT NULL,
    center_lon DECIMAL(10,7) NOT NULL,
    total_flights INT DEFAULT 0,
    region_id INT,
    resolution INT DEFAULT 6,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_hexagon_index (hexagon_index),
    INDEX idx_center (center_lat, center_lon),
    INDEX idx_region (region_id),
    INDEX idx_flights (total_flights)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 
COMMENT='–ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ H3 –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–æ–≤';
```

**–ü–æ–ª—è:**
- `hexagon_index` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π H3 –∏–Ω–¥–µ–∫—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: "86754e64fffffff")
- `center_lat`, `center_lon` ‚Äî —Ü–µ–Ω—Ç—Ä –≥–µ–∫—Å–∞–≥–æ–Ω–∞
- `total_flights` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ—Ç–æ–≤ –≤ –≥–µ–∫—Å–∞–≥–æ–Ω–µ
- `region_id` ‚Äî ID —Ä–µ–≥–∏–æ–Ω–∞
- `resolution` ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ H3 (–æ–±—ã—á–Ω–æ 6)

### –¢–∞–±–ª–∏—Ü–∞ `settings`

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è:

```sql
CREATE TABLE settings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    key_name VARCHAR(50) UNIQUE NOT NULL,
    value VARCHAR(255) NOT NULL,
    description TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- –ü–ª–æ—â–∞–¥—å —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏
INSERT INTO settings (key_name, value, description)
VALUES ('grid_cell_area', '1000', '–ü–ª–æ—â–∞–¥—å —è—á–µ–π–∫–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏ –≤ –∫–º¬≤');
```

### –°–≤—è–∑—å —Å processed_flights

```sql
ALTER TABLE processed_flights 
ADD COLUMN hexagon_id INT,
ADD INDEX idx_hexagon_id (hexagon_id);
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```python
# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ H3
H3_RESOLUTION = 6  # ~36 –∫–º¬≤ –Ω–∞ —è—á–µ–π–∫—É

# –ü–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —è—á–µ–π–∫–∏
DEFAULT_CELL_AREA = 1000  # –∫–º¬≤

# Bbox –†–æ—Å—Å–∏–∏
RUSSIA_BBOX = (41.0, 19.0, 82.0, 180.0)  # (lat_min, lon_min, lat_max, lon_max)

# –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
BATCH_SIZE = 1000
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–∏ —è—á–µ–π–∫–∏

**–ß–µ—Ä–µ–∑ SQL:**
```sql
UPDATE settings 
SET value = '2000' 
WHERE key_name = 'grid_cell_area';
```

**–ß–µ—Ä–µ–∑ Python:**
```python
generator = GridGenerator(DB_CONFIG)
generator.default_area = 2000  # 2000 –∫–º¬≤
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è H3

```python
# –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 7, ~5 –∫–º¬≤)
generator.generate_hexagon_grid(russia_bbox, resolution=7)

# –ú–µ–Ω–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 5, ~252 –∫–º¬≤)
generator.generate_hexagon_grid(russia_bbox, resolution=5)
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ç–æ–∫

```python
from grid.grid_generator import GridGenerator
from settings import DB_CONFIG

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
generator = GridGenerator(DB_CONFIG)
generator.connect()

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–µ–∏—Ö —Å–µ—Ç–æ–∫ –¥–ª—è –†–æ—Å—Å–∏–∏
russia_bbox = (41.0, 19.0, 82.0, 180.0)
success = generator.generate_grids(russia_bbox)

if success:
    print("‚úÖ –°–µ—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ")
else:
    print("‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–æ–∫")
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏

```python
generator = GridGenerator(DB_CONFIG)
generator.connect()

# –ö–≤–∞–¥—Ä–∞—Ç—ã –ø–æ 500 –∫–º¬≤
bbox = (41.0, 19.0, 82.0, 180.0)
generator.generate_square_grid(bbox, area_km2=500)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π —Å–µ—Ç–∫–∏

```python
generator = GridGenerator(DB_CONFIG)
generator.connect()

# H3 —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 7 (–±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ)
bbox = (55.0, 37.0, 56.0, 38.0)  # –ú–æ—Å–∫–≤–∞
generator.generate_hexagon_grid(bbox, resolution=7)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª–µ—Ç–æ–≤

```python
generator = GridGenerator(DB_CONFIG)
generator.connect()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —è—á–µ–µ–∫
generator.update_grid_cell_flights()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤
generator.update_hexagon_flights()

print("‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞")
```

### –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–µ—Ç–æ–≤ –∫ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–º

```python
generator = GridGenerator(DB_CONFIG)
generator.connect()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ hexagon_id –≤ processed_flights
updated_count = generator.update_processed_flights_hexagon_id_simple()
print(f"–û–±–Ω–æ–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: {updated_count}")
```

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

```python
from grid.grid_generator import GridGenerator
from settings import DB_CONFIG

def full_grid_update():
    generator = GridGenerator(DB_CONFIG)
    
    if not generator.connect():
        return False
    
    # 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ç–æ–∫
    russia_bbox = (41.0, 19.0, 82.0, 180.0)
    if not generator.generate_grids(russia_bbox):
        return False
    
    # 2. –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–µ—Ç–æ–≤ –∫ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–º
    updated = generator.update_processed_flights_hexagon_id_simple()
    print(f"–ü—Ä–∏–≤—è–∑–∞–Ω–æ –ø–æ–ª–µ—Ç–æ–≤: {updated}")
    
    # 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    generator.update_hexagon_flights()
    generator.update_grid_cell_flights()
    
    print("‚úÖ –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ")
    return True

if __name__ == "__main__":
    full_grid_update()
```

---

## üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

#### –¢–æ–ø —è—á–µ–µ–∫ –ø–æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–æ–≤

```sql
-- –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —è—á–µ–π–∫–∏
SELECT 
    id,
    center_lat,
    center_lon,
    total_flights,
    region_id
FROM grid_square
ORDER BY total_flights DESC
LIMIT 20;

-- –ì–µ–∫—Å–∞–≥–æ–Ω—ã H3
SELECT 
    hexagon_index,
    center_lat,
    center_lon,
    total_flights,
    region_id
FROM grid_hexagon
ORDER BY total_flights DESC
LIMIT 20;
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

```sql
-- –°—Ä–µ–¥–Ω—è—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º (–≥–µ–∫—Å–∞–≥–æ–Ω—ã)
SELECT 
    r.name as region_name,
    COUNT(gh.id) as hexagon_count,
    SUM(gh.total_flights) as total_flights,
    AVG(gh.total_flights) as avg_flights_per_hexagon,
    MAX(gh.total_flights) as max_flights_in_hexagon
FROM grid_hexagon gh
JOIN regions r ON gh.region_id = r.id
GROUP BY r.name
ORDER BY total_flights DESC;
```

#### –ì–æ—Ä—è—á–∏–µ –∑–æ–Ω—ã (hotspots)

```sql
-- –ó–æ–Ω—ã —Å –≤—ã—Å–æ–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é (>100 –ø–æ–ª–µ—Ç–æ–≤)
SELECT 
    hexagon_index,
    center_lat,
    center_lon,
    total_flights,
    CASE 
        WHEN total_flights > 1000 THEN '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è'
        WHEN total_flights > 500 THEN '–í—ã—Å–æ–∫–∞—è'
        WHEN total_flights > 100 THEN '–°—Ä–µ–¥–Ω—è—è'
        ELSE '–ù–∏–∑–∫–∞—è'
    END as density_level
FROM grid_hexagon
WHERE total_flights > 100
ORDER BY total_flights DESC;
```

#### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏

```sql
-- –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è (—è—á–µ–µ–∫ —Å –ø–æ–ª–µ—Ç–∞–º–∏)
SELECT 
    COUNT(*) as total_cells,
    SUM(CASE WHEN total_flights > 0 THEN 1 ELSE 0 END) as cells_with_flights,
    ROUND(SUM(CASE WHEN total_flights > 0 THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) as coverage_percent
FROM grid_hexagon;
```

---

## üîç –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

```python
import json
from grid.grid_generator import GridGenerator

def export_hexagons_geojson(filename='hexagons.geojson'):
    """–≠–∫—Å–ø–æ—Ä—Ç –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤ –≤ GeoJSON"""
    import h3
    
    generator = GridGenerator(DB_CONFIG)
    generator.connect()
    
    cursor = generator.connection.cursor(dictionary=True)
    cursor.execute("""
        SELECT hexagon_index, center_lat, center_lon, total_flights
        FROM grid_hexagon
        WHERE total_flights > 0
    """)
    
    features = []
    for row in cursor.fetchall():
        # –ü–æ–ª—É—á–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –≥–µ–∫—Å–∞–≥–æ–Ω–∞
        boundary = h3.h3_to_geo_boundary(row['hexagon_index'], geo_json=True)
        
        feature = {
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [boundary]
            },
            "properties": {
                "hexagon_index": row['hexagon_index'],
                "center": [row['center_lat'], row['center_lon']],
                "flights": row['total_flights']
            }
        }
        features.append(feature)
    
    geojson = {
        "type": "FeatureCollection",
        "features": features
    }
    
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(geojson, f, ensure_ascii=False, indent=2)
    
    print(f"‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ {len(features)} –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤ –≤ {filename}")

export_hexagons_geojson()
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ Yandex Maps

```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤
fetch('hexagons.geojson')
    .then(response => response.json())
    .then(data => {
        data.features.forEach(feature => {
            const flights = feature.properties.flights;
            const color = getColorByFlights(flights);
            
            const polygon = new ymaps.Polygon(
                feature.geometry.coordinates,
                {
                    hintContent: `–ü–æ–ª–µ—Ç–æ–≤: ${flights}`
                },
                {
                    fillColor: color,
                    fillOpacity: 0.6,
                    strokeColor: '#000',
                    strokeWidth: 1
                }
            );
            
            map.geoObjects.add(polygon);
        });
    });

function getColorByFlights(flights) {
    if (flights > 1000) return '#FF0000';  // –ö—Ä–∞—Å–Ω—ã–π
    if (flights > 500) return '#FF8800';   // –û—Ä–∞–Ω–∂–µ–≤—ã–π
    if (flights > 100) return '#FFFF00';   // –ñ–µ–ª—Ç—ã–π
    return '#00FF00';  // –ó–µ–ª–µ–Ω—ã–π
}
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –ó–∞–ø–∏—Å–µ–π |
|----------|-------|---------|
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏** | 10-30 —Å–µ–∫ | ~50,000 —è—á–µ–µ–∫ |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è H3 —Å–µ—Ç–∫–∏** | 5-15 —Å–µ–∫ | ~30,000 –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤ |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏** | 30-120 —Å–µ–∫ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ª–µ—Ç–æ–≤ |
| **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–º** | 1-5 –º–∏–Ω—É—Ç | ~100,000 –ø–æ–ª–µ—Ç–æ–≤ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** | 200-500 –ú–ë | - |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ batch –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
generator.update_grid_cell_flights(batch_size=5000)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
# - –ò–Ω–¥–µ–∫—Å—ã –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
# - –ò–Ω–¥–µ–∫—Å—ã –ø–æ hexagon_index –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
# - –ò–Ω–¥–µ–∫—Å—ã –ø–æ total_flights –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —è—á–µ–µ–∫

**–°–∏–º–ø—Ç–æ–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç >5 –º–∏–Ω—É—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ –ø–ª–æ—â–∞–¥—å —è—á–µ–π–∫–∏: `area_km2=2000`
2. –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ H3: `resolution=5`
3. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ bbox –º–µ–Ω—å—à–µ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞: –Ø—á–µ–π–∫–∏ –≤–Ω–µ –†–æ—Å—Å–∏–∏

**–°–∏–º–ø—Ç–æ–º:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —è—á–µ–µ–∫ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –†–§

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∫–ª—é—á–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ `regions`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `region_id` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª–µ—Ç–∞—Ö –≤ —è—á–µ–π–∫–∞—Ö

**–°–∏–º–ø—Ç–æ–º:** `total_flights = 0` –¥–ª—è –≤—Å–µ—Ö —è—á–µ–µ–∫

**–†–µ—à–µ–Ω–∏–µ:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ—Ç–æ–≤
cursor.execute("SELECT COUNT(*) FROM processed_flights")
print(f"–ü–æ–ª–µ—Ç–æ–≤ –≤ –ë–î: {cursor.fetchone()[0]}")

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –∫ –≥–µ–∫—Å–∞–≥–æ–Ω–∞–º
generator.update_processed_flights_hexagon_id_simple()

# 3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
generator.update_hexagon_flights()
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ UNIQUE constraint –Ω–∞ hexagon_index

**–†–µ—à–µ–Ω–∏–µ:**
```sql
-- –£–¥–∞–ª–∏—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
DELETE gh1 FROM grid_hexagon gh1
INNER JOIN grid_hexagon gh2 
WHERE gh1.id > gh2.id 
  AND gh1.hexagon_index = gh2.hexagon_index;
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **SQL Injection –∑–∞—â–∏—Ç–∞**: Prepared statements
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ–≤–µ—Ä–∫–∞ bbox
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Try-except –±–ª–æ–∫–∏
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: Rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `../log.log`:

```
2025-10-19 12:00:00 - INFO - –ù–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ç–æ–∫
2025-10-19 12:00:05 - INFO - ‚úÖ –ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: 52,341 —è—á–µ–µ–∫
2025-10-19 12:00:12 - INFO - ‚úÖ –ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ H3 —Å–æ–∑–¥–∞–Ω–∞: 31,245 –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤
2025-10-19 12:00:45 - INFO - –û–±–Ω–æ–≤–ª–µ–Ω–æ hexagon_id: 145,678 –∑–∞–ø–∏—Å–µ–π
2025-10-19 12:01:30 - INFO - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª–µ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
```

---

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

### –° Parser Module

```python
# –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª–µ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ç–∫–∏
from parser.parser_file import FlightDataProcessor
from grid.grid_generator import GridGenerator

processor = FlightDataProcessor()
processor.process_all_files()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–æ–∫
generator = GridGenerator(DB_CONFIG)
generator.connect()
generator.update_processed_flights_hexagon_id_simple()
generator.update_hexagon_flights()
```

### –° Area BPLA Module

```python
# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–ª–æ—â–∞–¥–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–µ–∫—Å–∞–≥–æ–Ω—ã
from area_bpla.generate_area_bpla import AreaBPLAGenerator

# –°–Ω–∞—á–∞–ª–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ç–∫–∏
generator = GridGenerator(DB_CONFIG)
generator.generate_grids(russia_bbox)

# –ó–∞—Ç–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–ª–æ—â–∞–¥–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–µ–∫—Å–∞–≥–æ–Ω–æ–≤
area_generator = AreaBPLAGenerator(DB_CONFIG)
area_generator.run()
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### H3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç**: https://h3geo.org/
- **GitHub**: https://github.com/uber/h3
- **Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞**: https://github.com/uber/h3-py

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **H3 Explorer**: https://wolf-h3-viewer.glitch.me/ (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
- **H3 Calculator**: https://observablehq.com/@nrabinowitz/h3-index-inspector

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã ¬© 2025 –ö–æ–º–∞–Ω–¥–∞ Finance.

---

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0.0  
**–ú–æ–¥—É–ª—å:** Grid Generator

